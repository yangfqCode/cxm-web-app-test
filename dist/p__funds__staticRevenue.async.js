(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{GkW3:function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var i=l(a("bx4M"));a("+L6B");var r=l(a("2/Rp"));a("14J3");var u=l(a("BMrR"));a("iQDF");var o=l(a("+eQT"));a("jCWc");var d=l(a("kPKH")),s=l(a("lwsE")),c=l(a("W8MJ")),f=l(a("a1gu")),p=l(a("Nsbk")),m=l(a("7W2i"));a("OaEy");var y=l(a("2fM7"));a("y8nQ");var v,h,E,g,x=l(a("Vl3Y")),b=n(a("q1tI")),D=l(a("wd/R")),F=a("MuoO"),k=a("RO9D"),R=l(a("xLbA")),M=l(a("ProS")),C=(l(a("lLGD")),l(a("75ce")),l(a("AH3D")),l(a("Ynxi")),a("7cBs")),w=x.default.Item,O=(y.default.Option,"YYYY-MM-DD"),S=new Array("\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"),L=(v=(0,F.connect)(function(e){var t=e.revenue,a=e.finance,l=e.loading;return{revenue:t,finance:a,loading:l.models.list}}),h=x.default.create(),v(E=h((g=function(e){function t(e){var a;return(0,s.default)(this,t),a=(0,f.default)(this,(0,p.default)(t).call(this,e)),a.initChart=function(e,t){var l=a.props.revenue,n=l.dailyRevenueList,i=l.monthRevenueList,r=[],u=[],o=[];if(1==e){r=Object.keys(n);var d=r.indexOf(t)+1,s=d-7>=0?d-7:0,c=r.slice(s,d);c.forEach(function(e){var t=(0,D.default)(e),a=S[t.day()];u.push(e+a)}),o=c.map(function(e){return n[e].totalRevenue})}else u=Object.keys(i),o=u.map(function(e){return i[e].totalRevenue});a.setState({curType:e,curDate:t});var f=M.default.init(document.getElementById("main"));f.setOption({title:{text:"\u6536\u76ca\u8d8b\u52bf"},tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"#00FF00",width:2,type:"solid"}}},xAxis:{type:"category",boundaryGap:!1,data:u},yAxis:{},series:[{name:"\u6536\u76ca",type:"line",data:o,itemStyle:{color:"#00FF00",normal:{color:"#93DB70",borderColor:"#00FF00",areaStyle:{type:"default",opacity:.1}}},lineStyle:{color:"#00FF00"}}],toolbox:{left:"center",feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},dataZoom:[{startValue:"2019-01-01"},{type:"inside",show:!0}]})},a.fetchDailyRevenueList=function(e){var t=a.state.curDate;a.props.dispatch({type:"revenue/fetchDailyRevenueList",payload:e,callback:function(){a.setState({loading:!1}),a.initChart(1,t)}})},a.datePickerChange=function(e,t){a.initChart(1,t)},a.renderDynamicFeeSpan=function(e,t){var l=a.props.revenue.feeFieldMap,n=["blue","red","#60B941"],i=[],r=0;return Object.keys(l).forEach(function(t){r++;var a=r%3,u=0;(0,k.isEmptyObject)(e)||(u=e[t]),i.push(b.default.createElement("span",{key:t,style:{color:n[a],fontSize:"16px"}},l[t]," : ",u,b.default.createElement("span",{style:{paddingRight:"30px"}})))}),b.default.createElement("div",null,i,t>0?b.default.createElement("span",{style:{color:"#60B941",fontSize:"16px"}},"  \u81ea\u8425\u8d27\u54c1\u6bdb\u5229\u6da6\uff1a",t," "):b.default.createElement("span",null))},a.state={loading:!0,show:!1,curDailyRevenue:{},curDate:(0,D.default)(new Date,O).format(O),curType:1},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=(0,D.default)(new Date,O).format(O);this.getFeeFieldMap(),this.fetchDailyRevenueList({dateTime:e}),this.fetchMonthRevenueList()}},{key:"componentWillUnmount",value:function(){}},{key:"fetchMonthRevenueList",value:function(e){this.props.dispatch({type:"revenue/fetchMonthRevenueList",payload:e})}},{key:"getFeeFieldMap",value:function(e){this.props.dispatch({type:"revenue/getFeeFieldMap",payload:e})}},{key:"render",value:function(){var e=this,t=this.props.revenue,a=t.dailyRevenueList,l=(t.feeFieldMap,this.state.curDate),n=this.props.form.getFieldDecorator,s=a||[],c={},f=0,p=0;(0,k.isEmptyObject)(s)||(c=s[l],(0,k.isEmptyObject)(c)||(f=c.totalRevenue,p=c.totalGrossProfie,c.goodsAmount=c.totalGoodsAmount));var m={xs:5,sm:5,md:5,lg:5,xl:5,style:{marginBottom:12}},y=b.default.createElement("div",{className:R.default.extraContent},b.default.createElement(x.default,{className:"login-form"},b.default.createElement(u.default,{gutter:24},b.default.createElement(d.default,m,b.default.createElement("div",{style:{float:"left"}},b.default.createElement("span",{style:{color:"#323232",fontSize:"24px"}},"\u5546\u884c\u6536\u76ca\uff1a ",b.default.createElement("span",{style:{color:"red",fontSize:"24px"}},(0,C.Yuan)(f,2))," \u5143"))),b.default.createElement(d.default,{span:4,className:R.default.submitBtn},b.default.createElement(w,null,n("dateTime",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65f6\u95f4!"}],initialValue:(0,D.default)(l,O)})(b.default.createElement(o.default,{allowClear:!1,onChange:this.datePickerChange}))))),b.default.createElement("div",null,b.default.createElement("div",{style:{float:"left"}},this.renderDynamicFeeSpan(c,p)))));return b.default.createElement("div",{className:R.default.billDetails},b.default.createElement(i.default,{className:R.default.listCard,bordered:!1,title:"",extra:y},b.default.createElement("div",{style:{float:"right",display:"flex",flex:1,position:"absolute",right:0,zIndex:999}},b.default.createElement(r.default,{className:R.default.btn,onClick:function(){return e.initChart(1,l)}},"\u6309 \u65e5"),b.default.createElement(r.default,{className:R.default.btn,onClick:function(){return e.initChart(2,l)}},"\u6309 \u6708")),b.default.createElement("div",{id:"main",style:{flex:1,height:450}})))}}]),t}(b.PureComponent),E=g))||E)||E);t.default=L}}]);