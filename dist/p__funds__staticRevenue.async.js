(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{GkW3:function(e,t,a){"use strict";var n=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var i=n(a("bx4M"));a("14J3");var r=n(a("BMrR"));a("iQDF");var u=n(a("+eQT"));a("jCWc");var o=n(a("kPKH")),s=n(a("lwsE")),d=n(a("W8MJ")),c=n(a("a1gu")),f=n(a("Nsbk")),p=n(a("7W2i"));a("OaEy");var m=n(a("2fM7"));a("y8nQ");var y,v,h,E,g=n(a("Vl3Y")),b=l(a("q1tI")),x=n(a("wd/R")),D=a("MuoO"),F=a("RO9D"),k=n(a("xLbA")),R=n(a("ProS")),M=(n(a("lLGD")),n(a("75ce")),n(a("AH3D")),n(a("Ynxi")),a("7cBs")),w=g.default.Item,C=(m.default.Option,"YYYY-MM-DD"),O=new Array("\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"),S=(y=(0,D.connect)(function(e){var t=e.revenue,a=e.finance,n=e.loading;return{revenue:t,finance:a,loading:n.models.list}}),v=g.default.create(),y(h=v((E=function(e){function t(e){var a;return(0,s.default)(this,t),a=(0,c.default)(this,(0,f.default)(t).call(this,e)),a.initChart=function(e,t){var n=a.props.revenue,l=n.dailyRevenueList,i=n.monthRevenueList,r=[],u=[],o=[];if(1==e){r=Object.keys(l);var s=r.indexOf(t)+1,d=s-7>=0?s-7:0,c=r.slice(d,s);c.forEach(function(e){var t=(0,x.default)(e),a=O[t.day()];u.push(e+a)}),o=c.map(function(e){return l[e].totalRevenue})}else u=Object.keys(i),o=u.map(function(e){return i[e].totalRevenue});a.setState({curType:e,curDate:t});var f=R.default.init(document.getElementById("main"));f.setOption({title:{text:"\u6536\u76ca\u8d8b\u52bf"},tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"#00FF00",width:2,type:"solid"}}},xAxis:{type:"category",boundaryGap:!1,data:u},yAxis:{},series:[{name:"\u6536\u76ca",type:"line",data:o,itemStyle:{color:"#00FF00",normal:{color:"#93DB70",borderColor:"#00FF00",areaStyle:{type:"default",opacity:.1}}},lineStyle:{color:"#00FF00"}}],toolbox:{left:"center",feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},dataZoom:[{startValue:"2019-01-01"},{type:"inside",show:!0}]})},a.fetchDailyRevenueList=function(e){var t=a.state.curDate;a.props.dispatch({type:"revenue/fetchDailyRevenueList",payload:e,callback:function(){a.setState({loading:!1}),a.initChart(1,t)}})},a.datePickerChange=function(e,t){a.initChart(1,t)},a.renderDynamicFeeSpan=function(e,t){var n=a.props.revenue.feeFieldMap,l=["blue","red","#60B941"],i=[],r=0;return Object.keys(n).forEach(function(t){r++;var a=r%3,u=0;(0,F.isEmptyObject)(e)||(u=e[t]),i.push(b.default.createElement("span",{key:t,style:{color:l[a],fontSize:"16px"}},n[t]," : ",u,b.default.createElement("span",{style:{paddingRight:"30px"}})))}),b.default.createElement("div",null,i,t>0?b.default.createElement("span",{style:{color:"#60B941",fontSize:"16px"}},"  \u81ea\u8425\u8d27\u54c1\u6bdb\u5229\u6da6\uff1a",t," "):b.default.createElement("span",null))},a.state={loading:!0,show:!1,curDailyRevenue:{},curDate:(0,x.default)(new Date,C).format(C),curType:1},a}return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=(0,x.default)(new Date,C).format(C);this.getFeeFieldMap(),this.fetchDailyRevenueList({dateTime:e}),this.fetchMonthRevenueList()}},{key:"componentWillUnmount",value:function(){}},{key:"fetchMonthRevenueList",value:function(e){this.props.dispatch({type:"revenue/fetchMonthRevenueList",payload:e})}},{key:"getFeeFieldMap",value:function(e){this.props.dispatch({type:"revenue/getFeeFieldMap",payload:e})}},{key:"render",value:function(){var e=this,t=this.props.revenue,a=t.dailyRevenueList,n=(t.feeFieldMap,this.state.curDate),l=this.props.form.getFieldDecorator,s=a||[],d={},c=0,f=0;(0,F.isEmptyObject)(s)||(d=s[n],(0,F.isEmptyObject)(d)||(c=d.totalRevenue,f=d.totalGrossProfie,d.goodsAmount=d.totalGoodsAmount));var p={xs:5,sm:5,md:5,lg:5,xl:5,style:{marginBottom:12}},m=b.default.createElement("div",{className:k.default.extraContent},b.default.createElement(g.default,{className:"login-form"},b.default.createElement(r.default,{gutter:24},b.default.createElement(o.default,p,b.default.createElement("div",{style:{float:"left"}},b.default.createElement("span",{style:{color:"#323232",fontSize:"24px"}},"\u5546\u884c\u6536\u76ca\uff1a ",b.default.createElement("span",{style:{color:"red",fontSize:"24px"}},(0,M.Yuan)(c,2))," \u5143"))),b.default.createElement(o.default,{span:4,className:k.default.submitBtn},b.default.createElement(w,null,l("dateTime",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65f6\u95f4!"}],initialValue:(0,x.default)(n,C)})(b.default.createElement(u.default,{allowClear:!1,onChange:this.datePickerChange}))))),b.default.createElement("div",null,b.default.createElement("div",{style:{float:"left"}},this.renderDynamicFeeSpan(d,f)))));return b.default.createElement("div",{className:k.default.billDetails},b.default.createElement(i.default,{className:k.default.listCard,bordered:!1,title:"",extra:m},b.default.createElement("div",{style:{float:"right"}},b.default.createElement("div",{className:"ant-btn-group"},b.default.createElement("button",{className:"ant-btn",onClick:function(){return e.initChart(1,n)}},"\u6309 \u65e5"),b.default.createElement("button",{className:"ant-btn",onClick:function(){return e.initChart(2,n)}},"\u6309 \u6708"))),b.default.createElement("div",{id:"main",style:{width:1200,height:600}})))}}]),t}(b.PureComponent),h=E))||h)||h);t.default=S}}]);